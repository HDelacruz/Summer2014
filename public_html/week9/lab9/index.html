<!DOCTYPE html>

<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        
         <style type="text/css">
            canvas {
                border: 1px solid black;
            }
            </style>
    </head>
    <body>
         <canvas id="race" width="750" height="150"></canvas>		 		
         <button id="play">play</button>
        <script>
            
            var can = document.getElementById('race');
            var playBtn = document.getElementById('play');
            var ctx = can.getContext('2d');
            
            var x1 = 0;
            var x2 = 0;
            
            
           playBtn.addEventListener('click',play,false);
            
            function play() {
                x1 = 0;
                x2 = 0;
                setTimeout(movecanvas, 100);
                playBtn.style.display = 'none';
            }
            
             function movecanvas(){
               
               ctx.clearRect(0,0,can.width,can.height);
               
                ctx.beginPath();
                ctx.moveTo(can.width-100, 0);
                ctx.lineTo(can.width-100, 150);
                ctx.stroke();
               
               
               ctx.fillStyle="red";
               ctx.fillRect(x1,25,50,25);
               
               ctx.fillStyle="blue";
               ctx.fillRect(x2,75,50,25);
                 var w = parseInt(can.width-150,10);
                 var max = 20;
                 if ( x1 < w && x2 < w) {
                     
                     x1+=randNum(max);
                     x2+=randNum(max);
                     setTimeout(movecanvas, 100);
                 } else {
                      ctx.font="20px Georgia";
                         ctx.fillStyle="black";
                        ctx.fillText("Winner!",10,50);
                     if ( x1 >= w) {                       
                        ctx.fillStyle="red";
                         ctx.fillText("Red",10,80);
                     }else if ( x2 >= w) {                       
                        ctx.fillStyle="blue";
                         ctx.fillText("Blue",10,80);
                     }
                     playBtn.style.display = 'block';
                 }
                
            }
            
            play();
            
             function randNum(max) {
               return Math.ceil(Math.random()*max) + 1;
           }
            </script>
    </body>
</html>
